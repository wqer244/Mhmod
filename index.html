<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>شعر شعبي عراقي</title>  <!-- خط Amiri -->  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet"/>
  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>  <style>
    :root {
      --bg: #f0f2f5;
      --card: #fff;
      --primary: #2c3e50;
      --accent: #3498db;
      --danger: #e74c3c;
      --shadow: rgba(0,0,0,0.1);
      --font: 'Amiri', serif;
      --transition: 0.3s ease;
      --fs: 16px;
    }
    [data-theme="dark"] {
      --bg: #2c3e50;
      --card: #34495e;
      --primary: #ecf0f1;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: var(--font);
      background: var(--bg);
      color: var(--primary);
      font-size: var(--fs);
      display:flex; flex-direction:column;
      min-height:100vh;
      transition: background var(--transition), color var(--transition), font-size var(--transition);
    }
    button,input,textarea { font-family: var(--font); }
    button { cursor:pointer; transition: color var(--transition); }

    header {
      background: var(--card);
      padding:1rem;
      display:flex; justify-content:space-between; align-items:center;
      box-shadow:0 2px 6px var(--shadow);
      position:sticky; top:0; z-index:10;
    }
    header h1 { font-size:1.5rem; }
    .icon-btn {
      background:transparent; border:none; font-size:1.2rem;
      color: var(--primary);
      transition: color var(--transition);
    }
    .icon-btn:hover { color: var(--accent); }

    main { flex:1; display:flex; overflow:hidden; }
    #poets, #poems {
      width:50%; padding:1rem; overflow-y:auto;
      transition: transform var(--transition);
    }
    #poems { transform: translateX(100%); }
    #poems.active { transform: translateX(0); }
    #poets.inactive { transform: translateX(-100%); }

    .poet-card {
      background: var(--card);
      padding:.75rem;
      margin-bottom:.75rem;
      border-radius:.5rem;
      box-shadow:0 2px 6px var(--shadow);
      cursor:pointer;
      transition: box-shadow var(--transition);
    }
    .poet-card:hover { box-shadow:0 4px 12px var(--shadow); }

    #search-bar {
      width:100%; padding:.5rem; margin-bottom:1rem;
      border:1px solid #ccc; border-radius:.25rem;
    }

    .poem-item {
      background: var(--card);
      padding:.75rem; margin-bottom:.5rem;
      border-radius:.5rem;
      box-shadow:0 1px 4px var(--shadow);
      display:flex; justify-content:space-between; align-items:center;
      transition: box-shadow var(--transition);
    }
    .poem-item:hover { box-shadow:0 2px 8px var(--shadow); }
    .poem-title { cursor:pointer; flex:1; }
    .poem-actions button {
      background:transparent; border:none; font-size:1.1rem;
      margin-left:.5rem; color: var(--primary);
      transition: color var(--transition);
    }
    .poem-actions .edit:hover { color: #2980b9; }
    .poem-actions .delete:hover { color: var(--danger); }

    #fab {
      position:fixed; bottom:1.5rem; left:1.5rem;
      width:3.5rem; height:3.5rem; background:var(--accent);
      color:#fff; border:none; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 4px 12px var(--shadow); font-size:1.5rem;
      z-index:10; transition: transform var(--transition);
    }
    #fab:hover { transform: scale(1.1); }

    .modal-overlay {
      position:fixed; inset:0; background:rgba(0,0,0,0.5);
      display:none; align-items:center; justify-content:center;
      z-index:20; padding:1rem;
    }
    .modal-overlay.active { display:flex; }
    .modal {
      background: var(--card); padding:1.5rem;
      border-radius:.75rem; box-shadow:0 4px 16px var(--shadow);
      width:100%; max-width:400px; position:relative;
    }
    .modal h3 { text-align:center; margin-bottom:1rem; }
    .modal input, .modal textarea {
      width:100%; padding:.5rem; margin-bottom:.75rem;
      border:1px solid #ccc; border-radius:.25rem;
    }
    .modal .buttons {
      display:flex; gap:.5rem;
    }
    .modal .buttons button {
      flex:1; padding:.5rem; border:none; border-radius:.5rem;
      color:#fff; transition: background var(--transition);
    }
    .save { background: var(--accent); }
    .update { background: #27ae60; }
    .cancel { background: #7f8c8d; }
    .modal .close-btn {
      position:absolute; top:.5rem; left:.5rem;
      background:transparent; border:none; font-size:1.25rem;
    }

    /* مودال الإعدادات */
    #modal-settings label {
      display:block; margin-bottom:.75rem;
    }
    #modal-settings input[type="range"] { width:100%; }

    /* الواجهة الكاملة للقصيدة */
    #full-screen {
      position:fixed; inset:0;
      background: #fff;
      display:none; flex-direction:column;
      z-index:15;
    }
    #full-screen.active { display:flex; }
    #full-screen header {
      display:flex; justify-content:flex-end;
      padding:1rem;
    }
    #full-screen header button {
      background:transparent; border:none; font-size:1.5rem; color:#333;
    }
    .full-content {
      flex:1; overflow-y:auto;
      padding:2rem; text-align:center;
      font-size:calc(1rem + 1vw);
      line-height:1.6;
      color: #000;
    }

    @media(max-width:768px){
      #poets,#poems{width:100%;transform:none!important;}
    }
  </style></head>
<body>  <header>
    <h1> مكتبة الشعر العراقي</h1>
    <div>
      <button id="settings-btn" class="icon-btn" aria-label="الإعدادات">
        <i class="fa-solid fa-gear"></i>
      </button>
      <button id="theme-toggle" class="icon-btn" aria-label="تبديل الوضع">
        <i class="fa-solid fa-moon"></i>
      </button>
    </div>
  </header>  <main>
    <section id="poets" aria-label="قائمة الشعراء"></section><section id="poems" aria-label="قصائد الشاعر">
  <input id="search-bar" placeholder="ابحث في القصائد..." aria-label="بحث"/>
  <h2 id="poet-name"></h2>
  <ul id="poem-list"></ul>
</section>

  </main><button id="fab" aria-label="إضافة قصيدة"><i class="fa-solid fa-plus"></i></button>

  <!-- مودال إضافة/تعديل -->  <div id="modal-form" class="modal-overlay" aria-modal="true">
    <div class="modal">
      <button class="close-btn" aria-label="إغلاق"><i class="fa-solid fa-times"></i></button>
      <h3 id="modal-title">إضافة قصيدة</h3>
      <input id="modal-title-input" placeholder="عنوان القصيدة"/>
      <textarea id="modal-text-input" rows="4" placeholder="نص القصيدة"></textarea>
      <div class="buttons">
        <button id="modal-save" class="save">حفظ</button>
        <button id="modal-update" class="update">تحديث</button>
        <button id="modal-cancel" class="cancel">إلغاء</button>
      </div>
    </div>
  </div>  <!-- مودال الإعدادات -->  <div id="modal-settings" class="modal-overlay" aria-modal="true">
    <div class="modal">
      <button class="close-btn" aria-label="إغلاق"><i class="fa-solid fa-times"></i></button>
      <h3>حجم الخط</h3>
      <label for="font-size-range">اختر الحجم: <span id="font-size-value"></span></label>
      <input type="range" id="font-size-range" min="12" max="32" step="1"/>
    </div>
  </div>  <!-- الواجهة الكاملة للقصيدة -->  <div id="full-screen" aria-modal="true">
    <header>
      <button id="close-full" aria-label="إغلاق"><i class="fa-solid fa-times"></i></button>
    </header>
    <div class="full-content">
      <h2 id="full-title"></h2>
      <p id="full-text"></p>
    </div>
  </div>  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // عناصر DOM
      const themeToggle = document.getElementById('theme-toggle');
      const settingsBtn = document.getElementById('settings-btn');
      const poetsSec    = document.getElementById('poets');
      const poemsSec    = document.getElementById('poems');
      const fab         = document.getElementById('fab');
      const searchBar   = document.getElementById('search-bar');
      const poetNameEl  = document.getElementById('poet-name');
      const poemList    = document.getElementById('poem-list');
      const modalForm   = document.getElementById('modal-form');
      const closeFormBtn= modalForm.querySelector('.close-btn');
      const modalTitle  = document.getElementById('modal-title');
      const titleInput  = document.getElementById('modal-title-input');
      const textInput   = document.getElementById('modal-text-input');
      const btnSave     = document.getElementById('modal-save');
      const btnUpdate   = document.getElementById('modal-update');
      const btnCancel   = document.getElementById('modal-cancel');
      const fullScreen  = document.getElementById('full-screen');
      const closeFull   = document.getElementById('close-full');
      const fullTitle   = document.getElementById('full-title');
      const fullText    = document.getElementById('full-text');

      // إعدادات حجم الخط
      const modalSettings = document.getElementById('modal-settings');
      const closeSettingsBtn = modalSettings.querySelector('.close-btn');
      const rangeInput = document.getElementById('font-size-range');
      const sizeValue  = document.getElementById('font-size-value');

      // بيانات افتراضية
      const poets = [{ name:'محمود عبد الطيف', id:'mohammed' }];
      let currentPoet = null, poems = [], editIndex = null;

      // استرجاع حجم الخط
      const savedFs = localStorage.getItem('fontSize');
      if (savedFs) {
        document.documentElement.style.setProperty('--fs', savedFs + 'px');
      }
      rangeInput.value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--fs'));
      sizeValue.textContent = rangeInput.value + 'px';

      rangeInput.oninput = () => {
        const v = rangeInput.value;
        document.documentElement.style.setProperty('--fs', v + 'px');
        sizeValue.textContent = v + 'px';
        localStorage.setItem('fontSize', v);
      };

      // عرض/إخفاء مودال الإعدادات
      settingsBtn.onclick = () => modalSettings.classList.add('active');
      closeSettingsBtn.onclick = () => modalSettings.classList.remove('active');
      modalSettings.onclick = e => { if(e.target===modalSettings) modalSettings.classList.remove('active'); };  

      // Theme persist
      const savedTheme = localStorage.getItem('theme');
      if(savedTheme==='dark') {
        document.documentElement.setAttribute('data-theme','dark');
        themeToggle.innerHTML = '<i class="fa-solid fa-sun"></i>';
      }
      themeToggle.onclick = () => {
        const isDark = document.documentElement.getAttribute('data-theme')==='dark';
        if(isDark) {
          document.documentElement.removeAttribute('data-theme');
          localStorage.setItem('theme','light');
          themeToggle.innerHTML = '<i class="fa-solid fa-moon"></i>';
        } else {
          document.documentElement.setAttribute('data-theme','dark');
          localStorage.setItem('theme','dark');
          themeToggle.innerHTML = '<i class="fa-solid fa-sun"></i>';
        }
      };

      // Render poets
      function renderPoets() {
        poetsSec.innerHTML = '';
        poets.forEach(p => {
          const div = document.createElement('div');
          div.className = 'poet-card';
          div.textContent = p.name;
          div.onclick = () => openPoet(p);
          poetsSec.append(div);
        });
      }

      // Open poet screen
      function openPoet(p) {
        currentPoet = p.id;
        poetNameEl.textContent = p.name;
        poems = JSON.parse(localStorage.getItem(p.id) || '[]');
        poetsSec.classList.add('inactive');
        poemsSec.classList.add('active');
        renderPoems();
      }

      // Render poems
      function renderPoems() {
        const q = searchBar.value.trim();
        poemList.innerHTML = '';
        poems.filter(o => o.title.includes(q)).forEach((it,i)=>{
          const li = document.createElement('li');
          li.className = 'poem-item';
          li.innerHTML = `
            <span class="poem-title">${it.title}</span>
            <div class="poem-actions">
              <button class="icon-btn edit"><i class="fa-solid fa-pen"></i></button>
              <button class="icon-btn delete"><i class="fa-solid fa-trash"></i></button>
            </div>`;
          // full view
          li.querySelector('.poem-title').onclick = ()=>{
            fullTitle.textContent = it.title;
            fullText.textContent = it.text;
            fullScreen.classList.add('active');
          };
          // delete
          li.querySelector('.delete').onclick = ()=>{
            if(confirm('هل تريد حذف هذه القصيدة؟')){
              poems.splice(i,1);
              localStorage.setItem(currentPoet, JSON.stringify(poems));
              renderPoems();
            }
          };
          // edit
          li.querySelector('.edit').onclick = ()=> openForm('edit',i);
          poemList.append(li);
        });
      }

      // Form open
      function openForm(mode,idx=null){
        modalForm.classList.add('active');
        if(mode==='add'){
          modalTitle.textContent='إضافة قصيدة'; btnSave.classList.remove('hidden'); btnUpdate.classList.add('hidden'); titleInput.value=''; textInput.value='';
        } else {
          modalTitle.textContent='تعديل قصيدة'; btnSave.classList.add('hidden'); btnUpdate.classList.remove('hidden'); editIndex=idx;
          titleInput.value=poems[idx].title; textInput.value=poems[idx].text;
        }
      }
      btnCancel.onclick = ()=> modalForm.classList.remove('active');
      closeFormBtn.onclick = ()=> modalForm.classList.remove('active');
      modalForm.onclick = e=>{ if(e.target===modalForm) modalForm.classList.remove('active'); };

      // Save / Update
      btnSave.onclick = ()=>{
        poems.push({ title: titleInput.value, text: textInput.value });
        localStorage.setItem(currentPoet, JSON.stringify(poems)); modalForm.classList.remove('active'); renderPoems();
      };
      btnUpdate.onclick = ()=>{
        poems[editIndex] = { title: titleInput.value, text: textInput.value };
        localStorage.setItem(currentPoet, JSON.stringify(poems)); modalForm.classList.remove('active'); renderPoems();
      };
      fab.onclick = ()=> openForm('add');

      // Search
      searchBar.oninput = renderPoems;

      // Close full-screen
      closeFull.onclick = ()=> fullScreen.classList.remove('active');
      fullScreen.onclick = e=>{ if(e.target===fullScreen) fullScreen.classList.remove('active'); };

      // Back button
      const backBtn = document.createElement('button');
      backBtn.className='icon-btn'; backBtn.innerHTML='<i class="fa-solid fa-arrow-right"></i>';
      backBtn.style.position='fixed'; backBtn.style.top='1rem'; backBtn.style.right='1rem';
      backBtn.onclick = ()=>{ poemsSec.classList.remove('active'); poetsSec.classList.remove('inactive'); };
      poemsSec.prepend(backBtn);

      renderPoets();
    });
  </script></body>
</html>
